<!DOCTYPE html>
<html lang="en">
<html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Docs | Cockroach Labs</title>
<link rel="canonical" href="/start-a-local-cluster.html">
<link rel="shortcut icon" href="images/favicon.png" type="image/png">

<link rel="stylesheet" type="text/css" href="css/syntax.css">
<link rel="stylesheet" type="text/css" href="css/sql.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/lavish-bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/customstyles.css">
<link rel="stylesheet" type="text/css" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>
<script src="js/anchor.js"></script>


  </head>

<body>

<!-- Mobile Side Navigation -->
<nav class="mobile_expanded" role="navigation">
    <a href="/docs/frequently-asked-questions.html" class="menu-item">FAQ</a>
    <a href="http://www.cockroachlabs.com/docs/" class="menu-item">Docs</a>
    <a href="http://www.cockroachlabs.com/community/" class="menu-item">Community</a>
    <a href="http://www.cockroachlabs.com/about/" class="menu-item">About</a>
    <a href="http://www.cockroachlabs.com/blog/" class="menu-item">Blog</a>
    <a href="/docs/install-cockroachdb.html" class="menu-item">Install</a>
</nav>

<!-- Desktop / Tablet Navigation -->
<header class="navbar-fixed-top">
    <div class="container">
        <div class="row">
            <a class="logo" href="/" title="Cockroach Labs">
                <img class="default" src="http://www.cockroachlabs.com/wp-content/themes/cockroach-labs/images/logo.png" width="100%" alt="Cockroach Labs" />
                <img class="scrolled" src="http://www.cockroachlabs.com/wp-content/themes/cockroach-labs/images/CL_Logo_Horizontal.png" width="100%" alt="Cockroach Labs" />
            </a>

            <nav class="desktop" role="navigation">
                <a href="/docs/frequently-asked-questions.html" class="menu-item">FAQ</a>
                <a href="http://www.cockroachlabs.com/docs/" class="menu-item current-menu-item">Docs</a>
                <a href="https://github.com/cockroachdb/cockroach/" class="menu-item">Community</a>
                <a href="http://www.cockroachlabs.com/about/" class="menu-item">About</a>
                <a href="http://www.cockroachlabs.com/blog/" class="menu-item">Blog</a>
                <a href="/docs/install-cockroachdb.html" class="btn cl-btn github menu-item">Install</a>
            </nav>
            <nav class="mobile" role="navigation">
                <a href="#" title="Expand Menu" class="hamburger">
                    <div class="hamburger_inner"></div>
                </a>
                <a target="_blank" href="/docs/install-cockroachdb.html" class="btn cl-btn github menu-item">Install</a>
            </nav>

        </div>
    </div>
</header>

    <!-- Page Content -->
    <div id="content">
      <div id="main-content" class="container">
        <div class="row">
              <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>

            $(document).ready(function() {
                // Initialize navgoco with default options
                var $sidebar = $('#mysidebar'),
                    $maincontent = $('#main-content');

                $sidebar.navgoco({
                    caretHtml: '',
                    accordion: true,
                    openClass: 'active', // open
                    save: false, // leave false or nav highlighting doesn't work right
                    cookie: {
                        name: 'navgoco',
                        expires: false,
                        path: '/'
                    },
                    slide: {
                        duration: 400,
                        easing: 'swing'
                    },
                    onToggleAfter: function(){
                        adjustMinHeight();
                    }
                });
                $sidebar.show();

                adjustMinHeight();

                function adjustMinHeight(){
                    setTimeout(function(){
                        var height = $sidebar.outerHeight();
                        if(height > 475){
                            $maincontent.animate({ 'min-height' : 625 + (height - 475) }, 200);
                        }else{
                            $maincontent.animate({ 'min-height' : 625 }, 200);
                        }
                    }, 400);
                }

            });

        </script>

        

        <ul id="mysidebar" class="nav" style="display: none">
            <li>
                <div class="search">
                    <form action="https://google.com/search" method="GET">
                        <span class="fa fa-search"></span>
                        <input type="hidden" name="sitesearch" value="cockroachlabs.com/docs">
                        <input type="text" name="q" id="search-input" placeholder="Search">
                    </form>
                </div>
            </li>
            
            
            <li><a href="#">Get Started</a>
                <ul>
                    
                    
                    <li><a href="install-cockroachdb.html">Install CockroachDB</a></li>

                    
            </li>
            
            
                    
                    <li class="active"><a href="start-a-local-cluster.html">Start a Local Cluster</a></li>
                    
            
                    
                    <li><a href="basic-sql-statements.html">Basic SQL Statements</a></li>

                    
            </li>
            
            
                    
                    <li><a href="install-client-drivers.html">Install Client Drivers</a></li>

                    
            </li>
            
            
                    
                    <li><a href="build-a-test-app.html">Build a Test App</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
            <li><a href="#">Develop</a>
                <ul>
                    
                    
                    <li><a href="sql-statements.html">SQL Statements</a></li>

                    
            </li>
            
            
                    
                    <li><a href="sql-grammar.html">SQL Grammar</a></li>

                    
            </li>
            
            
                    
                    <li><a href="data-definition.html">Data Definition</a></li>

                    
            </li>
            
            
                    
                    <li><a href="data-types.html">Data Types</a></li>

                    
            </li>
            
            
                    
                    <li><a href="functions-and-operators.html">Functions and Operators</a></li>

                    
            </li>
            
            
                    
                    <li><a href="transactions.html">Transactions</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
            <li><a href="#">Deploy</a>
                <ul>
                    
                    
                    <li><a href="manual-deployment.html">Manual Deployment</a></li>

                    
            </li>
            
            
                    
                    <li><a href="cloud-deployment.html">Cloud Deployment</a></li>

                    
            </li>
            
            
                    
                    <li><a href="start-a-node.html">Start a Node</a></li>

                    
            </li>
            
            
                    
                    <li><a href="stop-a-node.html">Stop a Node</a></li>

                    
            </li>
            
            
                    
                    <li><a href="cockroach-commands.html">Cockroach Commands</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
            <li><a href="#">Manage</a>
                <ul>
                    
                    
                    <li><a href="explore-the-admin-ui.html">Explore the Admin UI</a></li>

                    
            </li>
            
            
                    
                    <li><a href="troubleshoot.html">Troubleshoot</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
            <li><a href="#">Learn How It Works</a>
                <ul>
                    
                    
                    <li><a href="frequently-asked-questions.html">Frequently Asked Questions</a></li>

                    
            </li>
            
            
                    
                    <li><a href="cockroachdb-in-comparison.html">CockroachDB in Comparison</a></li>

                    
            </li>
            
            
                    
                    <li><a href="cockroachdb-architecture.html">CockroachDB Architecture</a></li>

                    
            </li>
            
            
                    
                    <li><a href="cockroachdb-features.html">CockroachDB Features</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
            <li><a href="#">Contribute</a>
                <ul>
                    
                    
                    <li><a href="contribute-to-cockroachdb.html">Contribute to CockroachDB</a></li>

                    
            </li>
            
            
                    
                    <li><a href="improve-the-docs.html">Improve the Docs</a></li>

                    
            </li>
            
            
            </ul>
        </li>
        
        
        </ul>

    </div>
       <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above.-->
    <script>$("li.active").parents('li').toggleClass("active");</script>

          <!-- Content Column -->
          <div class="col-md-9">
              <div class="post-header">
   <h1 class="post-title-main">Start a Local Cluster</h1>
</div>

<div class="post-content">

   


<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/*TOC that captures more than just h2*/
/*$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });*/

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>


  <p>Once you’ve <a href="install-cockroachdb.html">installed CockroachDB</a>, it’s easy to start a single- or multi-node cluster locally and talk to it via the built-in SQL client. Your cluster can be insecure or secure:</p>

<ul>
  <li>
    <p><a href="#insecure">Insecure</a><br />
This is the fastest way to start up a cluster and learn CockroachDB, but there’s no client/server authentication or encryption, so it’s suitable only for limited testing and development.</p>
  </li>
  <li>
    <p><a href="#secure">Secure</a><br />
Starting up a cluster with authenticated, encrypted client/server communication involves creating certificates and passing a few additional command line options, but it’s still simple.</p>
  </li>
</ul>

<div class="bs-callout bs-callout-info"> Want to deploy CockroachDB in production? See <a href="manual-deployment.html">Manual Deployment</a> or <a href="cloud-deployment.html">Cloud Deployment</a>.</div>

<h2 id="insecure">Insecure</h2>

<ol>
  <li>
    <p>From the directory containing the <code class="highlighter-rouge">cockroach</code> binary, start your first node:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach start --insecure

build:     alpha.v1-362-g723805f @ 2016/02/24 16:03:23 <span class="o">(</span>go1.6<span class="o">)</span>
admin:     http://ROACHs-MacBook-Pro.local:26257
sql:       postgresql://root@ROACHs-MacBook-Pro.local:26257?sslmode<span class="o">=</span>disable
logs:      cockroach-data/logs
store[0]:  cockroach-data
</code></pre>
    </div>

    <ul>
      <li>
        <p>The <code class="highlighter-rouge">--insecure</code> flag sets client/server communication to insecure on the default port, 26257. To bind to different port, set <code class="highlighter-rouge">--port=&lt;port&gt;</code>.</p>
      </li>
      <li>
        <p>Node storage defaults to the <code class="highlighter-rouge">cockroach-data</code> directory. To store to a different location, set <code class="highlighter-rouge">--stores=&lt;filepath&gt;</code>.</p>
      </li>
      <li>
        <p>The output gives you a helpful summary of the CockroachDB version, the URL for the admin UI, the SQL URL for your client code, and the storage locations for node data and logs.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>For each additional node, repeat step 1 with a few extra flags:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach start --insecure --stores<span class="o">=</span>&lt;filepath&gt; --port<span class="o">=</span>26258 --join<span class="o">=</span>localhost:26257
</code></pre>
    </div>

    <ul>
      <li>
        <p>Set the <code class="highlighter-rouge">--stores</code> flag to a storage location not in use by other nodes. To use multiple stores for the node, comma-separate the filepaths.</p>
      </li>
      <li>
        <p>Set the <code class="highlighter-rouge">--port</code> flag to a port not in use by other nodes.</p>
      </li>
      <li>
        <p>The <code class="highlighter-rouge">--join</code> flag connects the new node to the cluster. Set this flag to <code class="highlighter-rouge">localhost</code> and the port of the first node.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In a new shell, start the built-in SQL client:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach sql --insecure
<span class="c"># Welcome to the cockroach SQL interface.</span>
<span class="c"># All statements must be terminated by a semicolon.</span>
<span class="c"># To exit: CTRL + D.</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a href="basic-sql-statements.html">Run some queries</a>.</p>
  </li>
  <li>
    <p><a href="explore-the-admin-ui.html">Check out the Admin UI</a> by pointing your browser to <code class="highlighter-rouge">http://&lt;local host&gt;:26257</code>. You can find the complete address in the startup output as well (see step 1).</p>
  </li>
</ol>

<h2 id="secure">Secure</h2>

<ol>
  <li>
    <p>From the directory containing the <code class="highlighter-rouge">cockroach</code> binary, create security certificates:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach cert create-ca
<span class="gp">$ </span>./cockroach cert create-node localhost <span class="k">$(</span>hostname<span class="k">)</span>
<span class="gp">$ </span>./cockroach cert create-client root
</code></pre>
    </div>

    <ul>
      <li>
        <p>The first two commands create a default <code class="highlighter-rouge">certs</code> directory and add the certificate authority files and files for the node: <code class="highlighter-rouge">ca.cert</code>, <code class="highlighter-rouge">ca.key</code>,<code class="highlighter-rouge">node.server.crt</code>, <code class="highlighter-rouge">node.server.key</code>, <code class="highlighter-rouge">node.client.crt</code>, and <code class="highlighter-rouge">node.client.key</code>.</p>
      </li>
      <li>
        <p>The last command adds the files for the SQL client: <code class="highlighter-rouge">root.client.crt</code> and <code class="highlighter-rouge">root.client.key</code>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Start a secure node:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach start

build:     alpha.v1-362-g723805f @ 2016/02/24 16:03:23 <span class="o">(</span>go1.6<span class="o">)</span>
admin:     https://ROACHs-MacBook-Pro.local:26257
sql:       postgresql://root@ROACHs-MacBook-Pro.local:26257?sslcert<span class="o">=</span>%2FUsers%2F...
logs:      cockroach-data/logs
store[0]:  cockroach-data
</code></pre>
    </div>

    <ul>
      <li>
        <p>Secure communication uses the certificates in the <code class="highlighter-rouge">certs</code> directory and defaults to port 26257. To bind to a different port, set <code class="highlighter-rouge">--port=&lt;port&gt;</code>.</p>
      </li>
      <li>
        <p>Node storage defaults to the <code class="highlighter-rouge">cockroach-data</code> directory. To store to a different location, set <code class="highlighter-rouge">--stores=&lt;filepath&gt;</code>.</p>
      </li>
      <li>
        <p>The output gives you a helpful summary of the CockroachDB version, the URL for the admin UI, the SQL URL for your client code, and the storage locations for node data and logs.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>For each additional node, repeat step 2 with a few extra flags:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach start --stores<span class="o">=</span>&lt;filepath&gt; --port<span class="o">=</span>26258 --join<span class="o">=</span>localhost:26257
</code></pre>
    </div>

    <ul>
      <li>
        <p>Set the <code class="highlighter-rouge">--stores</code> flag to a storage location not in use by other nodes. To use multiple stores for the node, comma-separate the filepaths.</p>
      </li>
      <li>
        <p>Set the <code class="highlighter-rouge">--port</code> flag to a port not in use by other nodes.</p>
      </li>
      <li>
        <p>The <code class="highlighter-rouge">--join</code> flag connects the new node to the cluster. Set this flag to <code class="highlighter-rouge">localhost</code> and the port of the first node.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In a new shell, start the built-in SQL client:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>./cockroach sql
<span class="c"># Welcome to the cockroach SQL interface.</span>
<span class="c"># All statements must be terminated by a semicolon.</span>
<span class="c"># To exit: CTRL + D.</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><a href="basic-sql-statements.html">Run some queries</a>.</p>
  </li>
  <li>
    <p><a href="explore-the-admin-ui.html">Check out the Admin UI</a> by pointing your browser to <code class="highlighter-rouge">https://&lt;local host&gt;:26257</code>. You can find the complete address in the startup output as well (see step 2). Note that your browser will consider the cockroach-created certificate invalid; you’ll need to click through a warning message to get to the UI.</p>
  </li>
</ol>

<h2 id="whats-next">What’s Next?</h2>

<p>Learn more about <a href="basic-sql-statements.html">CockroachDB SQL</a> and start <a href="build-a-test-app.html">building a test app</a>.</p>




















































































































































</div>


<script>
anchors.add();
</script>

          </div>
        </div>
        <!-- /.row -->
      </div>
    </div>    <!-- /.container -->
     <div id="footer">
	<div class="container">
		<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
		<div id="hubspot-form">
		<script>
			hbspt.forms.create({ 
				css: '',
				portalId: '1753393',
				formId: '3a24a2d8-c2fd-4e89-acf6-73a4e7b4b69f'
			});
		</script>
		<div class="row footer_nav_row">
			<div class="footer_logo">
				<img src="http://www.cockroachlabs.com/wp-content/themes/cockroach-labs/images/logo.png" width="100%" alt="Cockroach Labs" />
			</div>
			<div class="footer_social_col col-xs-6 col-sm-3">
			<ul class="footer_social">
				<li class="header">Connect</li>
				<li><a target="_blank" href="https://github.com/cockroachdb/cockroach" class="menu-item">GitHub</a></li>
				<li><a href="https://groups.google.com/forum/#!forum/cockroach-db" class="menu-item">Google Group</a></li>
				<li><a target="_blank" href="https://twitter.com/cockroachdb" class="menu-item">Twitter</a></li>
				<li><a target="_blank" href="http://www.reddit.com/r/CockroachDB/" class="menu-item">Reddit</a></li>
				<!--
				<li><a target="_blank" href="https://www.facebook.com/cockroachlabs" class="menu-item">Facebook</a></li>
				<li><a target="_blank" href="https://www.linkedin.com/company/cockroach-labs" class="menu-item">LinkedIn</a></li>
				<li><a target="_blank" href="http://www.quora.com/CockroachDB" class="menu-item">Quora</a></li>
				<li><a href="http://stackoverflow.com/questions/tagged/cockroachdb" class="menu-item">Stack Overflow</a></li>
				<li><a target="_blank" href="http://www.cockroachlabs.com/feed/" class="menu-item">RSS</a></li>
				<li><a target="_blank" href="http://instagram.com/cockroachdb" class="menu-item">Instagram</a></li>
				-->
			</ul>
		</div>
		<div class="footer_nav_col col-xs-6 col-sm-3">
			<ul class="footer_nav">
				<li class="header">Company</li>
				<li><a href="http://www.cockroachlabs.com/careers/" class="menu-item">Careers</a></li>
				<li><a href="http://www.cockroachlabs.com/blog/" class="menu-item">Blog</a></li>
				<li><a href="http://www.cockroachlabs.com/press/" class="menu-item">Press</a></li>
				<li><a href="http://www.cockroachlabs.com/contact/" class="menu-item">Contact</a></li>
			</ul>
			</div>
		</div>
		<div class="row copyright">© 2016 Cockroach Labs </div>
	</div>
</div>


<script>
$('.expandcollapse').on('click', function () {
  $(this).next().toggle();
});
</script>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-63775601-1', 'auto');
    ga('send', 'pageview');
</script>



</html>

